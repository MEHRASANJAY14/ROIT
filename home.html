<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MPGB Housing Loan Eligibility Calculator</title>

<style>
body{
font-family:Arial, sans-serif;
background:linear-gradient(135deg,#004d00,#00a86b);
padding:20px;
margin:0;
}

.container{
max-width:520px;
background:#ffffff;
padding:25px;
border-radius:15px;
margin:auto;
box-shadow:0 10px 25px rgba(0,0,0,0.25);
}

h2{
text-align:center;
color:#004d00;
margin-bottom:15px;
}

input, select{
width:100%;
padding:10px;
margin-top:10px;
border-radius:8px;
border:1px solid #ccc;
font-size:14px;
}

button{
width:100%;
padding:12px;
background:#004d00;
color:white;
border:none;
border-radius:10px;
margin-top:15px;
font-size:16px;
cursor:pointer;
}

button:hover{
background:#003300;
}

#result{
margin-top:20px;
background:#f0fff0;
padding:15px;
border-radius:10px;
font-weight:bold;
display:none;
}

.error{
color:red;
font-weight:bold;
margin-top:10px;
}
</style>
</head>

<body>

<div class="container">
<h2>üè¶ MPGB Housing Loan Eligibility</h2>

<form id="loanForm">

<input type="number" id="income" placeholder="Monthly Gross Income (‚Çπ)" required>

<input type="number" id="existingEmi" placeholder="Existing EMI (‚Çπ)" required>

<input type="number" id="roi" placeholder="Base Interest Rate (%)" required>

<input type="number" id="tenure" placeholder="Tenure (Years)" required>

<input type="number" id="property" placeholder="Property Value (‚Çπ)" required>

<input type="number" id="cibil" placeholder="CIBIL Score (300-900)" min="300" max="900" required>

<select id="employment" required>
<option value="">Employment Type</option>
<option>Salaried</option>
<option>Business</option>
<option>Professional</option>
</select>

<select id="purpose" required>
<option value="">Loan Purpose</option>
<option>Construction</option>
<option>Purchase</option>
<option>Top-Up</option>
<option>Repair</option>
<option>Extension</option>
</select>

<button type="submit">Calculate Eligibility</button>

</form>

<div class="error" id="errorMsg"></div>
<div id="result"></div>

</div>

<script>
document.getElementById("loanForm").addEventListener("submit", function(e){

e.preventDefault();

let income = Number(document.getElementById("income").value);
let existingEmi = Number(document.getElementById("existingEmi").value);
let rate = Number(document.getElementById("roi").value);
let tenureYears = Number(document.getElementById("tenure").value);
let property = Number(document.getElementById("property").value);
let cibil = Number(document.getElementById("cibil").value);

let errorDiv = document.getElementById("errorMsg");
let resultDiv = document.getElementById("result");

errorDiv.innerHTML="";
resultDiv.style.display="none";

if(cibil < 650){
errorDiv.innerHTML="‚ùå Not Eligible ‚Äì CIBIL Below 650";
return;
}

// üîµ NTHP Rule (Circular Based)
let nthp = 0.40;
if(income > 100000 && income <= 500000) nthp = 0.30;
if(income > 500000) nthp = 0.25;

let eligibleEmi = (income * nthp) - existingEmi;

if(eligibleEmi <= 0){
errorDiv.innerHTML="‚ùå Not Eligible ‚Äì High Existing EMI Burden";
return;
}

// üîµ CIBIL Interest Concession
let finalRate = rate;
if(cibil >= 800) finalRate = rate - 0.50;
else if(cibil >= 725) finalRate = rate - 0.40;

let tenure = tenureYears * 12;
let monthlyRate = finalRate / 100 / 12;

// EMI Based Loan
let loanIncomeBased = eligibleEmi * 
((Math.pow(1+monthlyRate, tenure)-1) /
(monthlyRate * Math.pow(1+monthlyRate, tenure)));

// üîµ LTV Rule
let ltv = 0.90;
if(loanIncomeBased > 3000000 && loanIncomeBased <= 7500000) ltv = 0.80;
if(loanIncomeBased > 7500000) ltv = 0.75;

let loanPropertyBased = property * ltv;

let finalLoan = Math.min(loanIncomeBased, loanPropertyBased);

// üîµ Margin Rule
let margin = 10;
if(finalLoan > 3000000 && finalLoan <= 7500000) margin = 20;
if(finalLoan > 7500000) margin = 25;

// EMI Calculation
let emi = finalLoan * monthlyRate * Math.pow(1+monthlyRate, tenure) /
(Math.pow(1+monthlyRate, tenure) - 1);

resultDiv.style.display="block";
resultDiv.innerHTML = `
‚úÖ Eligible Loan Amount: ‚Çπ ${Math.round(finalLoan)} <br><br>
üìÜ Estimated EMI: ‚Çπ ${Math.round(emi)} <br><br>
üí∞ Margin Required: ${margin}% <br><br>
üìä Interest Rate Applied: ${finalRate.toFixed(2)}% <br><br>
üè¶ Eligibility Status: Eligible
`;

});
</script>

</body>
</html>
