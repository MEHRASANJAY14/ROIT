<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Loan Eligibility & EMI Schedule</title>

<style>
body{
font-family:Arial, sans-serif;
background:linear-gradient(135deg,#003300,#009933);
margin:0;
padding:20px;
}

.container{
max-width:900px;
background:#ffffff;
padding:30px;
margin:auto;
border-radius:15px;
box-shadow:0 15px 40px rgba(0,0,0,0.3);
}

h2{
text-align:center;
color:#003300;
}

.form-grid{
display:grid;
grid-template-columns: 1fr 1fr;
gap:15px;
}

.form-group{
display:flex;
flex-direction:column;
}

label{
font-weight:bold;
margin-bottom:5px;
}

input,select{
padding:10px;
border-radius:8px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
background:#003300;
color:white;
border:none;
border-radius:10px;
margin-top:20px;
font-size:16px;
cursor:pointer;
}

button:hover{background:#001a00;}

#resultSection{
margin-top:30px;
display:none;
}

.report-table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

.report-table th,
.report-table td{
border:1px solid #ccc;
padding:8px;
font-size:13px;
text-align:center;
}

.report-table th{
background:#003300;
color:white;
}

.summary-box{
border:2px solid #003300;
padding:15px;
margin-bottom:20px;
background:#f9fff9;
}

.print-btn{
background:#006600;
margin-top:15px;
}

@media print{
body{background:white;padding:0;}
form, button{display:none;}
}
</style>
</head>

<body>

<div class="container">

<h2>üè¶ HOME LOAN ELIGIBILITY & EMI SCHEDULE</h2>

<form id="loanForm">

<div class="form-grid">

<div class="form-group">
<label>Applicant Name</label>
<input type="text" id="name" required>
</div>

<div class="form-group">
<label>Monthly Gross Income (‚Çπ)</label>
<input type="number" id="income" required>
</div>

<div class="form-group">
<label>Existing EMI (‚Çπ)</label>
<input type="number" id="existingEmi" required>
</div>

<div class="form-group">
<label>Interest Rate (%)</label>
<input type="number" id="roi" required>
</div>

<div class="form-group">
<label>Tenure (Years)</label>
<input type="number" id="tenure" required>
</div>

<div class="form-group">
<label>Applicant Age</label>
<input type="number" id="age" required>
</div>

<div class="form-group">
<label>Property Value (‚Çπ)</label>
<input type="number" id="property" required>
</div>

<div class="form-group">
<label>CIBIL Score</label>
<input type="number" id="cibil" min="300" max="900" required>
</div>

</div>

<button type="submit">Generate Report & Schedule</button>

</form>

<div id="resultSection">
<div class="summary-box" id="summaryBox"></div>

<h3>üìä EMI Amortization Schedule</h3>
<table class="report-table">
<thead>
<tr>
<th>Month</th>
<th>Opening Balance</th>
<th>EMI</th>
<th>Interest</th>
<th>Principal</th>
<th>Closing Balance</th>
</tr>
</thead>
<tbody id="scheduleBody"></tbody>
</table>

<button class="print-btn" onclick="window.print()">Print Report</button>
</div>

</div>

<script>
document.getElementById("loanForm").addEventListener("submit", function(e){

e.preventDefault();

let income = Number(income.value);
let existingEmi = Number(existingEmi.value);
let rate = Number(roi.value);
let tenureYears = Number(tenure.value);
let ageVal = Number(age.value);
let propertyVal = Number(property.value);
let cibilVal = Number(cibil.value);

if(cibilVal < 650){
alert("Not Eligible ‚Äì Low CIBIL");
return;
}

let retirementAge = 60;
let maxTenure = retirementAge - ageVal;
if(maxTenure <= 0){
alert("Age beyond retirement");
return;
}

let finalTenureYears = Math.min(tenureYears, maxTenure, 30);
let months = finalTenureYears * 12;

let nthp = income <= 100000 ? 0.40 :
income <= 500000 ? 0.30 : 0.25;

let eligibleEmi = (income * nthp) - existingEmi;
if(eligibleEmi <= 10000){
alert("Minimum ‚Çπ10,000 balance not maintained");
return;
}

let finalRate = rate;
if(cibilVal >= 800) finalRate -= 0.50;
else if(cibilVal >= 725) finalRate -= 0.40;

let monthlyRate = finalRate/100/12;

let loanIncome = eligibleEmi *
((Math.pow(1+monthlyRate, months)-1) /
(monthlyRate*Math.pow(1+monthlyRate, months)));

let ltv = propertyVal <= 3000000 ? 0.90 :
propertyVal <= 7500000 ? 0.80 : 0.75;

let finalLoan = Math.min(loanIncome, propertyVal * ltv);

let emi = finalLoan * monthlyRate *
Math.pow(1+monthlyRate, months) /
(Math.pow(1+monthlyRate, months)-1);

document.getElementById("resultSection").style.display="block";

document.getElementById("summaryBox").innerHTML = `
<b>Eligible Loan:</b> ‚Çπ ${Math.round(finalLoan)} <br>
<b>EMI:</b> ‚Çπ ${Math.round(emi)} <br>
<b>Interest Rate:</b> ${finalRate.toFixed(2)}% <br>
<b>Tenure:</b> ${finalTenureYears} Years
`;

let balance = finalLoan;
let scheduleHTML = "";

for(let i=1; i<=months; i++){

let interest = balance * monthlyRate;
let principal = emi - interest;
let closing = balance - principal;

scheduleHTML += `
<tr>
<td>${i}</td>
<td>${balance.toFixed(0)}</td>
<td>${emi.toFixed(0)}</td>
<td>${interest.toFixed(0)}</td>
<td>${principal.toFixed(0)}</td>
<td>${closing.toFixed(0)}</td>
</tr>
`;

balance = closing;
}

document.getElementById("scheduleBody").innerHTML = scheduleHTML;

});
</script>

</body>
</html>
