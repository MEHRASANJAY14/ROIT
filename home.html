<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Loan Eligibility System</title>

<style>
body{
font-family:Arial, sans-serif;
background:linear-gradient(135deg,#003300,#009933);
margin:0;
padding:20px;
}

.container{
max-width:700px;
background:#fff;
padding:25px;
margin:auto;
border-radius:15px;
box-shadow:0 15px 35px rgba(0,0,0,0.3);
}

.header{
text-align:center;
color:#003300;
margin-bottom:20px;
}

input,select{
width:100%;
padding:10px;
margin-top:10px;
border-radius:8px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
background:#003300;
color:white;
border:none;
border-radius:10px;
margin-top:15px;
font-size:16px;
cursor:pointer;
}

button:hover{background:#001a00;}

#resultSection{
margin-top:25px;
padding:20px;
border:2px solid #003300;
border-radius:10px;
display:none;
background:#f9fff9;
}

.print-btn{
background:#006600;
margin-top:15px;
}

.print-btn:hover{
background:#004d00;
}

/* PRINT FORMAT */
@media print{
body{
background:white;
padding:0;
}
button, form{
display:none;
}
#resultSection{
border:none;
}
}
</style>
</head>

<body>

<div class="container">

<div class="header">
<h2>üè¶ HOME LOAN ELIGIBILITY REPORT</h2>
<p>Pre-Sanction Eligibility Assessment</p>
</div>

<form id="loanForm">

<input type="text" id="name" placeholder="Applicant Name" required>
<input type="number" id="income" placeholder="Monthly Gross Income (‚Çπ)" required>
<input type="number" id="existingEmi" placeholder="Existing EMI (‚Çπ)" required>
<input type="number" id="roi" placeholder="Base Interest Rate (%)" required>
<input type="number" id="tenure" placeholder="Requested Tenure (Years)" required>
<input type="number" id="age" placeholder="Applicant Age (Years)" required>
<input type="number" id="property" placeholder="Property Value (‚Çπ)" required>
<input type="number" id="cibil" placeholder="CIBIL Score (300-900)" required>

<select id="employment" required>
<option value="">Employment Type</option>
<option>Salaried</option>
<option>Business</option>
<option>Professional</option>
</select>

<button type="submit">Generate Eligibility Report</button>

</form>

<div id="resultSection"></div>
<button class="print-btn" onclick="window.print()" style="display:none;" id="printBtn">Print Eligibility Sheet</button>

</div>

<script>
document.getElementById("loanForm").addEventListener("submit", function(e){

e.preventDefault();

let name = document.getElementById("name").value;
let income = Number(document.getElementById("income").value);
let existingEmi = Number(document.getElementById("existingEmi").value);
let rate = Number(document.getElementById("roi").value);
let tenureRequested = Number(document.getElementById("tenure").value);
let age = Number(document.getElementById("age").value);
let property = Number(document.getElementById("property").value);
let cibil = Number(document.getElementById("cibil").value);

if(cibil < 650){
alert("Not Eligible ‚Äì CIBIL Below 650");
return;
}

let retirementAge = 60;
let maxTenureByAge = retirementAge - age;
if(maxTenureByAge <= 0){
alert("Not Eligible ‚Äì Age Beyond Retirement");
return;
}

let finalTenureYears = Math.min(tenureRequested, maxTenureByAge, 30);
let tenure = finalTenureYears * 12;

let nthp = 0.40;
if(income > 100000 && income <= 500000) nthp = 0.30;
if(income > 500000) nthp = 0.25;

let eligibleEmi = (income * nthp) - existingEmi;

if(eligibleEmi <= 10000){
alert("Not Eligible ‚Äì Minimum ‚Çπ10,000 Balance Not Maintained");
return;
}

let finalRate = rate;
if(cibil >= 800) finalRate = rate - 0.50;
else if(cibil >= 725) finalRate = rate - 0.40;

if(finalRate < 6) finalRate = 6;

let monthlyRate = finalRate/100/12;

let loanIncomeBased = eligibleEmi *
((Math.pow(1+monthlyRate, tenure)-1) /
(monthlyRate * Math.pow(1+monthlyRate, tenure)));

let ltv = 0.90;
if(property > 3000000 && property <= 7500000) ltv = 0.80;
if(property > 7500000) ltv = 0.75;

let loanPropertyBased = property * ltv;
let finalLoan = Math.min(loanIncomeBased, loanPropertyBased);

let margin = 10;
if(finalLoan > 3000000 && finalLoan <= 7500000) margin = 20;
if(finalLoan > 7500000) margin = 25;

let emi = finalLoan * monthlyRate * Math.pow(1+monthlyRate, tenure) /
(Math.pow(1+monthlyRate, tenure) - 1);

let today = new Date().toLocaleDateString();

document.getElementById("resultSection").style.display="block";
document.getElementById("printBtn").style.display="block";

document.getElementById("resultSection").innerHTML = `
<h3 style="text-align:center;">ELIGIBILITY ASSESSMENT SUMMARY</h3>
<hr>
<p><b>Date:</b> ${today}</p>
<p><b>Applicant Name:</b> ${name}</p>
<p><b>Employment Type:</b> ${document.getElementById("employment").value}</p>
<p><b>CIBIL Score:</b> ${cibil}</p>
<hr>
<p><b>Eligible Loan Amount:</b> ‚Çπ ${Math.round(finalLoan)}</p>
<p><b>Estimated EMI:</b> ‚Çπ ${Math.round(emi)}</p>
<p><b>Interest Rate Applied:</b> ${finalRate.toFixed(2)}%</p>
<p><b>Margin Requirement:</b> ${margin}%</p>
<p><b>Final Tenure Approved:</b> ${finalTenureYears} Years</p>
<hr>
<p style="font-size:12px;">Note: This is a system generated pre-sanction eligibility assessment and subject to verification of documents and bank approval norms.</p>
`;
});
</script>

</body>
</html>
